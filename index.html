<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>The Equal Lens</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@500;600&display=swap" rel="stylesheet">

<style>
*{margin:0;padding:0;box-sizing:border-box}

body{
  font-family:'Poppins',sans-serif;
  background:#0b0b0e;
  color:#fff;
}

/* ===== STORY ===== */
.story{
  height:100vh;
  position:relative;
  overflow:hidden;
}

/* GRID FEEL */
.tile-field{
  position:absolute;
  inset:0;
}

/* BIG SQUARE TILES */
.tile{
  position:absolute;
  width:220px;
  height:220px;
  background:#0b0b0e;
  border:1.2px solid rgba(255,255,255,0.18);
  display:flex;
  align-items:center;
  justify-content:center;
  text-align:center;
  padding:22px;
  font-family:"Playfair Display",serif;
  font-size:18px;
  line-height:1.4;
}

/* text hidden initially */
.tile span{
  opacity:0;
  transition:opacity 0.4s ease;
}

/* ACTIVE TILE */
.tile.active{
  border-color:rgba(255,255,255,0.9);
  box-shadow:
    0 0 0 rgba(255,255,255,0),
    0 0 24px rgba(255,255,255,0.18);
  animation:spark 0.9s ease-out;
}

.tile.active span{
  opacity:1;
}

/* SUBTLE SPARK */
@keyframes spark{
  0%{box-shadow:0 0 0 rgba(255,255,255,0)}
  40%{box-shadow:0 0 28px rgba(255,255,255,0.25)}
  100%{box-shadow:0 0 18px rgba(255,255,255,0.15)}
}

/* CENTER TEXT */
.center{
  position:absolute;
  inset:0;
  display:flex;
  align-items:center;
  justify-content:center;
  pointer-events:none;
}

.center-text{
  font-family:"Playfair Display",serif;
  font-size:40px;
  text-align:center;
  max-width:75%;
  opacity:0;
}

/* MOBILE */
@media(max-width:600px){
  .tile{
    width:160px;
    height:160px;
    font-size:15px;
    padding:16px;
  }
  .center-text{
    font-size:24px;
    max-width:90%;
  }
}
</style>
</head>

<body>

<section class="story">
  <div class="tile-field" id="tiles"></div>
  <div class="center">
    <div class="center-text" id="centerText"></div>
  </div>
</section>

<script src="https://cdn.jsdelivr.net/npm/gsap@3/dist/gsap.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/gsap@3/dist/ScrollTrigger.min.js"></script>

<script>
gsap.registerPlugin(ScrollTrigger);

/* === EXACT NARRATIVE YOU ASKED FOR === */
const messages = [
  "Kids don’t learn gender in classrooms.",
  "They learn it in playgrounds.",
  "At home.",
  "In silence.",
  "Through jokes.",
  "Through rules no one explains."
];

const centerMessages = [
  "WE DON’T LECTURE.",
  "WE HELP THEM NOTICE."
];

const isMobile = window.innerWidth < 600;

/* SPACED POSITIONS — BIG TILES NEED AIR */
const positionsDesktop = [
  {x:8,y:18},{x:62,y:16},
  {x:22,y:58},{x:68,y:60},
  {x:40,y:32},{x:12,y:72}
];

const positionsMobile = [
  {x:8,y:18},{x:55,y:20},
  {x:18,y:52},{x:55,y:58}
];

const positions = isMobile ? positionsMobile : positionsDesktop;

/* CREATE TILES */
const field = document.getElementById("tiles");
const tiles = positions.map(pos=>{
  const t = document.createElement("div");
  t.className = "tile";
  t.style.left = pos.x + "vw";
  t.style.top = pos.y + "vh";
  field.appendChild(t);
  return t;
});

/* SCROLL — SLOW + READABLE */
const scrollUnit = isMobile ? 700 : 520;

const tl = gsap.timeline({
  scrollTrigger:{
    trigger:".story",
    start:"top top",
    end:"+=" + (messages.length + centerMessages.length + 2) * scrollUnit,
    scrub:true,
    pin:true
  }
});

/* TILE SEQUENCE */
messages.forEach((text,i)=>{
  const tile = tiles[i % tiles.length];
  const span = document.createElement("span");
  span.textContent = text;
  tile.appendChild(span);

  tl.to({},{
    onStart:()=>{
      tiles.forEach(t=>{
        t.classList.remove("active");
        const s = t.querySelector("span");
        if(s) s.style.opacity = 0;
      });
      tile.classList.add("active");
      span.style.opacity = 1;
    }
  });
});

/* CLEAR TILES */
tl.to({},{
  onStart:()=>{
    tiles.forEach(t=>{
      const s = t.querySelector("span");
      if(s) s.remove();
      t.classList.remove("active");
    });
  }
});

/* CENTER TEXT */
const center = document.getElementById("centerText");
centerMessages.forEach(txt=>{
  tl.to(center,{
    onStart:()=>{
      center.textContent = txt;
      gsap.to(center,{opacity:1,duration:0.4});
    }
  }).to(center,{opacity:0,duration:0.4});
});
</script>

</body>
</html>
