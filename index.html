<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>The Equal Lens</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@500;600&display=swap" rel="stylesheet">

<style>
*{margin:0;padding:0;box-sizing:border-box}

body{
  background:#0b0b0e;
  color:#fff;
  font-family:'Playfair Display',serif;
  height:500vh;
}

/* SECTION */
.story{
  height:100vh;
}

/* GRID */
.grid{
  position:fixed;
  inset:0;
  display:grid;
  grid-template-columns:repeat(6,1fr);
  grid-template-rows:repeat(6,1fr);
}

/* CELL */
.cell{
  border:1px solid rgba(255,255,255,0.14);
  display:flex;
  align-items:center;
  justify-content:center;
  text-align:center;
  padding:22px;
  font-size:18px;
  line-height:1.4;
  opacity:0.25;
  transition:opacity .4s ease, box-shadow .4s ease;
}

/* CONTENT */
.cell span{
  opacity:0;
  transition:opacity .4s ease;
}

/* ACTIVE SPARK */
.cell.active{
  opacity:1;
  box-shadow:0 0 28px rgba(255,255,255,0.25);
}

.cell.active span{
  opacity:1;
}

/* CENTER */
.center{
  position:fixed;
  inset:0;
  display:flex;
  align-items:center;
  justify-content:center;
  pointer-events:none;
}

.center-text{
  font-size:42px;
  opacity:0;
  text-align:center;
}

/* MOBILE */
@media(max-width:768px){
  .grid{
    grid-template-columns:repeat(4,1fr);
    grid-template-rows:repeat(6,1fr);
  }
  .cell{font-size:15px;padding:14px}
  .center-text{font-size:24px}
}
</style>
</head>

<body>

<section class="story">
  <div class="grid" id="grid"></div>
  <div class="center">
    <div class="center-text" id="centerText"></div>
  </div>
</section>

<script src="https://cdn.jsdelivr.net/npm/gsap@3/dist/gsap.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/gsap@3/dist/ScrollTrigger.min.js"></script>

<script>
gsap.registerPlugin(ScrollTrigger);

/* GRID SETUP */
const grid = document.getElementById("grid");
const cells = [];
const totalCells = window.innerWidth < 768 ? 24 : 36;

for(let i=0;i<totalCells;i++){
  const c=document.createElement("div");
  c.className="cell";
  grid.appendChild(c);
  cells.push(c);
}

/* PHASE 1: NARRATIVE */
const narrative = [
  "Kids donâ€™t learn gender in classrooms.",
  "They learn it in playgrounds.",
  "At home.",
  "In silence.",
  "Through jokes.",
  "Through rules no one explains."
];

/* PHASE 4: IDEAS */
const ideas = [
  "â€œBoys donâ€™t cryâ€ â†’ Boys can cry ðŸ’§",
  "â€œGirls donâ€™t play cricketâ€ â†’ They excel when given opportunity ðŸ",
  "Care is not weakness ðŸŒ±",
  "Leadership isnâ€™t gendered",
  "Confidence is taught, not born",
  "Equality is learned early",
  "Strength looks different",
  "Respect is everyoneâ€™s job",
  "Ability isnâ€™t gendered",
  "Silence teaches too",
  "Let kids choose freely",
  "Empathy is power"
];

/* RANDOM HELPERS */
function shuffle(arr){
  return arr.sort(()=>Math.random()-0.5);
}

const shuffledCells = shuffle([...cells]);

/* TIMELINE */
const tl = gsap.timeline({
  scrollTrigger:{
    trigger:".story",
    start:"top top",
    end:"+=" + 4200,
    scrub:true,
    pin:true
  }
});

/* NARRATIVE APPEARS SCATTERED */
narrative.forEach((text,i)=>{
  const cell = shuffledCells[i];
  const span = document.createElement("span");
  span.textContent=text;
  cell.appendChild(span);

  tl.to({},{
    onStart:()=>{
      cells.forEach(c=>c.classList.remove("active"));
      cell.classList.add("active");
    }
  });
});

/* CENTER MESSAGE */
const center=document.getElementById("centerText");
["WE DONâ€™T LECTURE.","WE HELP THEM NOTICE."].forEach(t=>{
  tl.to(center,{
    onStart:()=>{
      center.textContent=t;
      gsap.to(center,{opacity:1,duration:.4});
    }
  }).to(center,{opacity:0,duration:.4});
});

/* FILL THE GRID SLOWLY */
shuffle(cells).forEach((cell,i)=>{
  const span=document.createElement("span");
  span.textContent=ideas[i % ideas.length];
  cell.appendChild(span);

  tl.to({},{
    onStart:()=>{
      cell.classList.add("active");
    }
  });
});
</script>

</body>
</html>
