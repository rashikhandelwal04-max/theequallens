<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>The Equal Lens</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@500;600&display=swap" rel="stylesheet">

<style>
*{margin:0;padding:0;box-sizing:border-box}

body{
  background:#0b0b0e;
  color:#fff;
  font-family:'Playfair Display',serif;
  height:600vh;
}

/* SECTION */
.story{
  height:100vh;
}

/* GRID */
.grid{
  position:fixed;
  inset:0;
  display:grid;
  grid-template-columns:repeat(6,1fr);
  grid-template-rows:repeat(6,1fr);
}

/* CELL */
.cell{
  border:1px solid rgba(255,255,255,0.14);
  display:flex;
  align-items:center;
  justify-content:center;
  text-align:center;
  padding:24px;
  font-size:18px;
  line-height:1.4;
  opacity:0.25;
  transition:opacity .3s ease;
}

.cell span{
  opacity:0;
  transition:opacity .3s ease;
}

/* ACTIVE */
.cell.active{
  opacity:1;
}

.cell.active span{
  opacity:1;
}

/* CENTER TEXT */
.center{
  position:fixed;
  inset:0;
  display:flex;
  align-items:center;
  justify-content:center;
  pointer-events:none;
}

.center-text{
  font-size:42px;
  text-align:center;
  opacity:0;
}

/* MOBILE */
@media(max-width:768px){
  .grid{
    grid-template-columns:repeat(4,1fr);
    grid-template-rows:repeat(6,1fr);
  }
  .cell{
    font-size:15px;
    padding:14px;
  }
  .center-text{
    font-size:24px;
  }
}
</style>
</head>

<body>

<section class="story">
  <div class="grid" id="grid"></div>
  <div class="center">
    <div class="center-text" id="centerText"></div>
  </div>
</section>

<script src="https://cdn.jsdelivr.net/npm/gsap@3/dist/gsap.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/gsap@3/dist/ScrollTrigger.min.js"></script>

<script>
gsap.registerPlugin(ScrollTrigger);

/* CREATE GRID */
const grid = document.getElementById("grid");
const cells = [];
const totalCells = window.innerWidth < 768 ? 24 : 36;

for(let i=0;i<totalCells;i++){
  const c = document.createElement("div");
  c.className = "cell";
  grid.appendChild(c);
  cells.push(c);
}

/* HELPERS */
function clearCells(){
  cells.forEach(c=>{
    c.classList.remove("active");
    const s = c.querySelector("span");
    if(s) s.remove();
  });
}

function activateCell(index, text){
  clearCells();
  const span = document.createElement("span");
  span.textContent = text;
  cells[index].appendChild(span);
  cells[index].classList.add("active");
}

/* PHASE 1 — HERO NARRATIVE */
const narrative = [
  "Kids don’t learn gender in classrooms.",
  "They learn it in playgrounds.",
  "At home.",
  "In silence.",
  "Through jokes.",
  "Through rules no one explains."
];

/* NICE SCATTERED POSITIONS */
const narrativeIndexes = [3, 9, 14, 20, 27, 32];

/* PHASE 3 — IDEAS (ALL UNIQUE, SHORT) */
const ideas = [
  "Emotions are not gendered",
  "Girls can excel in sports when given opportunity",
  "Care is not weakness",
  "Leadership is not gendered",
  "Confidence is taught, not born",
  "Equality is learned early",
  "Strength looks different",
  "Respect is learned young",
  "Ability isn’t fixed by gender",
  "Silence teaches norms",
  "Children notice before we speak",
  "Bias is absorbed early",
  "Fairness can be taught",
  "Roles are learned, not natural",
  "Empathy is a skill",
  "Choice matters early",
  "Opportunity shapes outcomes",
  "Kindness is strength"
];

/* TIMELINE */
const tl = gsap.timeline({
  scrollTrigger:{
    trigger:".story",
    start:"top top",
    end:"+=" + 5200,
    scrub:true,
    pin:true
  }
});

/* PHASE 1 EXECUTION */
narrative.forEach((text,i)=>{
  tl.to({},{
    onStart:()=>activateCell(narrativeIndexes[i], text)
  });
});

/* CLEAR BEFORE CENTER */
tl.to({},{
  onStart:()=>clearCells()
});

/* CENTER TEXT */
const center = document.getElementById("centerText");

["WE DON’T LECTURE.","WE HELP THEM NOTICE."].forEach(t=>{
  tl.to(center,{
    onStart:()=>{
      center.textContent = t;
      gsap.to(center,{opacity:1,duration:.4});
    }
  }).to(center,{opacity:0,duration:.4});
});

/* PHASE 3 — FILL GRID SLOWLY */
cells.forEach((cell,i)=>{
  const span = document.createElement("span");
  span.textContent = ideas[i % ideas.length];
  cell.appendChild(span);

  tl.to({},{
    onStart:()=>{
      cell.classList.add("active");
    }
  });
});
</script>

</body>
</html>
